<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Rock Paper Scissors</title>
    <link href="./styles/styles.css" rel="stylesheet" />
  </head>
  <body
    class="flex min-h-screen flex-col bg-gradient-to-br from-purple-600 via-pink-600 to-red-600 text-gray-600"
  >
    <header
      id="game-header"
      class="hidden bg-white/90 shadow-md backdrop-blur-sm"
    >
      <div
        class="mx-auto flex max-w-7xl items-center justify-between px-4 py-3"
      >
        <p class="font-semibold text-gray-800">
          Hello, <span class="current-nickname"></span>
        </p>

        <button id="exit-game-btn" class="btn-primary hidden">
          Leave game
        </button>
      </div>
    </header>

    <div
      id="screens-wrap"
      class="flex w-full flex-1 items-center justify-center p-4"
    >
      <div id="screen-loading" class="screen">
        <div class="mb-8">
          <p class="heading-2">Loading...</p>
        </div>
      </div>
      <div id="screen-login" class="screen hidden">
        <p class="heading-1 mb-8">Rock Paper Scissors</p>

        <div>
          <form id="signup-form">
            <label for="nickname-input" class="float-left"
              >Enter your nickname to start playing</label
            >
            <input
              type="text"
              id="nickname-input"
              placeholder="Your nickname"
              maxlength="20"
              class="my-4 w-full rounded-lg border-2 border-gray-300 px-4 py-3 text-lg focus:border-purple-500 focus:outline-none"
            />
            <p class="error-message my-1 hidden text-red-600"></p>

            <button id="submit-nickname-btn" class="btn-primary w-full">
              Continue
            </button>
          </form>
        </div>
      </div>

      <div id="screen-lobby" class="screen hidden">
        <div class="mb-8">
          <p class="heading-2">
            Welcome, <span class="current-nickname"></span>!
          </p>
          <p>Ready to play?</p>
        </div>

        <button id="join-game-btn" class="btn-secondary w-full">
          Join a New Game
        </button>
      </div>

      <div id="screen-waiting" class="screen hidden">
        <div class="py-12">
          <div
            class="mx-auto mb-4 h-16 w-16 animate-spin rounded-full border-b-4 border-purple-600"
          ></div>
          <p class="heading-3 font-bold">Waiting for opponent...</p>
          <p>Searching for another player</p>
        </div>
      </div>

      <div id="screen-playing" class="screen hidden" data-screen="playing">
        <p class="heading-3">
          You are playing against
          <span class="opponent-nickname font-bold"></span>
        </p>
        <p class="mb-4">Make Your Move!</p>

        <div id="moves-container" class="mt-4">
          <button class="move-btn btn-secondary" data-move="rock">Rock!</button>
          <button class="move-btn btn-secondary" data-move="paper">
            Paper!
          </button>
          <button class="move-btn btn-secondary" data-move="scissors">
            Scissors!
          </button>
        </div>
        <div id="chosen-move-container" class="hidden">
          <p class="mb-2">
            Your move is <span id="chosen-move" class="font-bold"></span>
          </p>
          <p>Waiting for opponent...</p>
        </div>
      </div>

      <div id="screen-game-finished" class="screen hidden">
        <div class="mb-8">
          <p id="game-result-won" class="game-result heading-1 hidden">
            You <span class="font-bold">won!</span>
          </p>
          <p id="game-result-lost" class="game-result heading-1 hidden">
            You <span class="font-bold">lost...</span>
          </p>
          <p id="game-result-tie" class="game-result heading-1 hidden">
            It was <span class="font-bold">a tie</span>
          </p>

          <p id="game-result-opponent-left" class="game-result mt-4 hidden">
            Your opponent left the game.
          </p>

          <div id="game-result-moves" class="game-result mt-3 hidden">
            <p class="text-left text-xl">
              You: <span id="your-move" class="font-bold"></span>
            </p>
            <p class="text-right text-xl">
              <span class="opponent-nickname"></span>:
              <span id="opponent-move" class="font-bold"></span>
            </p>
          </div>
        </div>

        <button
          id="play-again-btn"
          class="btn-primary w-full"
          onclick="playAgain()"
        >
          Find new opponent
        </button>
      </div>
    </div>

    <script
      src="https://cdn.socket.io/4.3.2/socket.io.min.js"
      integrity="sha384-KAZ4DtjNhLChOB/hxXuKqhMLYvx3b5MlT55xPEiNmREKRzeEm+RVPlTnAn0ajQNs"
      crossorigin="anonymous"
    ></script>
    <script src="./scripts/main.js"></script>
  </body>
</html>
